extends layout

block content
  .gapA
  - const indexOpenings = ['Got a spare business idea? Why not share it so others can use it.', 'Let others know about your business. Share your website here.', 'Found an interesting blog post or article? Help others by sharing it!'];
  - openingPhrase = indexOpenings[parseInt((Math.random() * indexOpenings.length))]
  #title=openingPhrase
  .gapA
  .bodyWrapper
    .sideBar *Content*
    .mainContent
      .formContainer
        button(onclick="openForm()")
          .shareForm
            i.fas.fa-pen-square <b> Add a post of your own!</b>
      #popupWrapper
        #popupForm
          form(action="/api/process-share" method="POST")
            textarea(id="postContent" name="postContent" placeholder="What would you like to share?" maxlength="1000" oninput="checkForLink()")
            #postLinkContainer
              img#postLinkImg
              #postLinkDescription
            button(type="submit" class="submitbtn") <b>Post</b>
            button(type="button" class="closebtn" onclick="closeForm()") <b>Close</b>
      .error= message
      each share in sharesList
        .contentsContainer
          .contents
            .publisher
              small Published by #{share.publisher}
            .comments= share.content
            .contentLink <b>Link: </b>
              a(href=`${share.link}`) #{share.link}
            .contentIcons
              i.far.fa-thumbs-up
                small= share.likes
              i.far.fa-comment
                small= share.comments
              i.fas.fa-share
                small= share.shares
      .loadMoreWrapper
          .loadMoreContainer
            button
              .loadMore <b>Load more posts</b>
  script
    | function openForm() {document.getElementById("popupWrapper").style.display="flex"; document.getElementById("popupForm").style.display="block";}
    | function closeForm() {document.getElementById("popupWrapper").style.display="none"; document.getElementById("popupForm").style.display="none";}
